---
title: "CSR, SSR, SSGã®æ¯”è¼ƒ"
emoji: "ğŸ”¥"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Next.js"]
published: false
---

## ã¯ã˜ã‚ã«

æ—¢ã«SSR, SSG, CSRã«ã¤ã„ã¦å¤šãã®è¨˜äº‹ãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™ãŒã€å®Ÿéš›ã«æŒ™å‹•ã‚’ç¢ºèªã—ãªãŒã‚‰ãã‚Œãã‚Œã®é•ã„ã‚’è©¦ã—ãŸã“ã¨ãŒãªã‹ã£ãŸã®ã§ã€ç°¡å˜ãªã‚µã‚¤ãƒˆã‚’ä½œæˆã—ã¦æ¯”è¼ƒã—ã¦ã¿ã¾ã—ãŸã€‚

[https://next-rendering-comparison.vercel.app/](https://next-rendering-comparison.vercel.app/)

https://github.com/shun1121/next-rendering-comparison

## **ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ**

```
.next/
node_modules/
public/
src/
  pages/
    â”œâ”€ api/
    â”œâ”€ csr/
    â”‚   â”œâ”€ index.tsx
    â”œâ”€ ssg/
    â”‚   â”œâ”€ index.tsx
    â”œâ”€ ssr/
    â”‚   â”œâ”€ index.tsx
    â”œâ”€ _app.tsx
    â”œâ”€ _document.tsx
    â”œâ”€ index.tsx
    â”œâ”€ styles/
.eslintrc.json
.gitignore
next-env.d.ts
next.config.js
package.json
postcss.config.js
README.md
tailwind.config.ts
tsconfig.json
yarn.lock

```

!https://static.zenn.studio/images/copy-icon.svg

## **Next.jsã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**

`yarn create next-app`

ã§Next.jsã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚ä»Šå›ã¯pagesãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ä½œæˆã—ã¦ã„ã‚‹ã®ã§ä¸‹è¨˜ç”»åƒã®æ‰‹é †ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šã‚’ã—ã¦ã„ãã¾ã™ã€‚

https://gyazo.com/070d4581456d5959bfca0ab0b69b0d9e

CSR, SSR, SSGã®å®Ÿè£…ã¯ãã‚Œãã‚Œ```csr```, ```ssr```, ```ssg```ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒšãƒ¼ã‚¸ã«å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

## CSR, SSR, SSGã«ã¤ã„ã¦

****CSRã¨ã¯****

Client Side Renderingã®ç•¥ã§ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§JavaScriptã‚’ä½¿ç”¨ã—ã¦ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç”Ÿæˆã™ã‚‹æ–¹æ³•ã§ã™ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã—ã¦ç©ºã®HTMLã‚„JavaScriptç­‰ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’è¿”ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§JavaScriptãŒå®Ÿè¡Œã•ã‚Œãƒšãƒ¼ã‚¸ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚„ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒãªã©ãŒè¡Œã‚ã‚Œã¾ã™ã€‚

å®Ÿè£…ãŒæ¯”è¼ƒçš„ç°¡å˜ã§ç”»é¢é·ç§»ã‚’é«˜é€Ÿã§è¡Œãˆã‚‹ãªã©ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚‹ä¸€æ–¹ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹ã‚’æœ€åˆã«å–å¾—ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§JavaScriptãŒå®Ÿè¡Œã•ã‚Œã¦ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒèµ·ã“ã‚‹ã®ã§åˆæœŸè¡¨ç¤ºãŒé…ã‹ã£ãŸã‚Šã€ç©ºã®HTMLãŒè¿”ã‚‹ã®ã§SEOã‚„OGPã«å¯¾å¿œã§ããªã„ã€ãªã©ã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚Šã¾ã™ã€‚


****SSRã¨ã¯****

Server Side Renderingã®ç•¥ã§ã€ã‚µãƒ¼ãƒå´ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¦ç”Ÿæˆã—ãŸHTMLã‚’ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«è¿”ã™æ–¹æ³•ã§ã™ã€‚ã‚µãƒ¼ãƒå´ã§HTMLãŒç”Ÿæˆã•ã‚Œã‚‹ãŸã‚SEOã‚„OGPã«å¯¾å¿œã™ã‚‹ã“ã¨ãŒã§ãã€ã¾ãŸã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚ã‚‹ãŸã³ã«ãƒšãƒ¼ã‚¸ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã€åˆå›ã«ã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã‚€å¿…è¦ãŒãªãã€åˆå›ã®è¡¨ç¤ºé€Ÿåº¦ã‚‚çŸ­ããªã‚‹ã¨ã„ã£ãŸãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®éƒ½åº¦ãƒªã‚½ãƒ¼ã‚¹ã‚’å–å¾—ã—ã¦HTMLã‚’ç”Ÿæˆã™ã‚‹ã®ã§ã€2å›ç›®ä»¥é™ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ã¯CSRã‚ˆã‚Šã‚‚è¡¨ç¤ºé€Ÿåº¦ãŒé…ããªã‚‹ãªã©ã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚Šã¾ã™ã€‚

****SSGã¨ã¯****

Static Site Generationã®ç•¥ã§ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚µãƒ¼ãƒå´ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€é™çš„ãªHTMLã‚’äº‹å‰ã«ä½œæˆã™ã‚‹æ–¹æ³•ã§ã™ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚ã£ãŸã¨ãã«ãƒ“ãƒ«ãƒ‰æ™‚ã«ç”Ÿæˆã—ãŸé™çš„ãªHTMLã‚’è¿”ã—ã¾ã™ã€‚ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’CDNã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šã€é«˜é€Ÿãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã“ã¨ãŒã§ãã‚‹ãªã©ã®ãƒ¡ãƒªãƒƒãƒˆãŒã‚ã‚Šã¾ã™ã€‚ã—ã‹ã—ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã—ã¦ã—ã¾ã†ã®ã§ã€ãƒ“ãƒ«ãƒ‰ä»¥é™ãƒ‡ãƒ¼ã‚¿ãŒæ›´æ–°ã•ã‚Œã¦ã‚‚ãƒšãƒ¼ã‚¸ã«åæ˜ ã•ã‚Œãªã‹ã£ãŸã‚Šã€ãƒšãƒ¼ã‚¸æ•°ãªã©ãŒå¤šããªã‚‹ã¨ãƒ“ãƒ«ãƒ‰ã«ã‹ã‹ã‚‹æ™‚é–“ãŒé•·ããªã‚‹ãªã©ã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚Šã¾ã™ã€‚

## CSRã‚’ä½¿ç”¨ã™ã‚‹

`src/csr/index.tsx`

```jsx
import Link from 'next/link';
import useSWR from 'swr';

export const CSR = () => {
  const { data, error } = useSWR("https://jsonplaceholder.typicode.com/users", async (url) => {
    const response = await fetch(url)
    const data = await response.json()
    return data
  })
  const time = new Date()
  const hour = time.getHours()
  const minute = time.getMinutes()
  const second = time.getSeconds()
  const currentTime = hour + "æ™‚" + minute + "åˆ†" + second + "ç§’"
  if (error) {
    return <div>error</div>
  }
  if (!data) {
    return <div>Loading</div>;
  }
  return (
    <div className="w-full mx-auto py-8">
      <nav className="ml-10 flex gap-2 underline">
        <Link href="/ssg">
          ssg
        </Link>
        <Link href="/ssr">
          ssr
        </Link>
      </nav>
      <div className="w-full mx-auto py-8">
        <h2 className="text-[32px] text-center py-8">CSR</h2>
        <div className="text-[32px] text-center">{currentTime}</div>
        <table className="border max-w-[800px] w-full mx-auto">
          <thead className="border">
            <tr>
              <th className="border">id</th>
              <th className="border">name</th>
              <th className="border">username</th>
              <th className="border">email</th>
            </tr>
          </thead>
          <tbody>
            {
              data.map((user: any) => (
                <tr key={user.id}>
                  <td className="border">{user.id}</td>
                  <td className="border">{user.name}</td>
                  <td className="border">{user.username}</td>
                  <td className="border">{user.email}</td>
                </tr>
              ))
            }
          </tbody>
        </table>
      </div>
    </div>
  )
}

export default CSR
```

Json Place Holderã‚’ä½¿ã£ã¦Tableã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€ç¾åœ¨ã®æ™‚é–“ã‚‚è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚åŸºæœ¬çš„ã«ã‚¹ãƒ ãƒ¼ã‚ºã«å‹•ãã¾ã™ãŒã€åˆå›ã®ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«`data`ãŒå–å¾—ã§ãã‚‹ã¾ã§å°‘ã—æ™‚é–“ãŒã‹ã‹ã‚‹ãŸã‚ã€ç”»é¢å·¦ä¸Šã«`Loading`ã®æ–‡å­—ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚

[Video by Gyazo](https://gyazo.com/748a58aefbc8a91dd8eeaa9f70e8b279)

## SSRã‚’ä½¿ç”¨ã™ã‚‹

`src/ssr/index.tsx`

```jsx
import Link from "next/link"

export const SSR = ({ usersData, currentTime }: any) => {
  return (
    <div className="w-full mx-auto py-8">
      <nav className="ml-10 flex gap-2 underline">
        <Link href="/csr">
          csr
        </Link>
        <Link href="/ssg">
          ssg
        </Link>
      </nav>
      <h2 className="text-[32px] text-center pt-[64px] pb-8">SSR</h2>
      <div className="text-[32px] text-center">{currentTime}</div>
      {usersData ? (
        <table className="border max-w-[800px] w-full mx-auto">
          <thead className="border">
            <tr>
              <th className="border">id</th>
              <th className="border">name</th>
              <th className="border">username</th>
              <th className="border">email</th>
            </tr>
          </thead>
          <tbody>
            {
              usersData.map((user: any) => (
                <tr key={user.id}>
                  <td className="border">{user.id}</td>
                  <td className="border">{user.name}</td>
                  <td className="border">{user.username}</td>
                  <td className="border">{user.email}</td>
                </tr>
              ))
            }
          </tbody>
        </table>
      ) : (
        <div>loading</div>
      )}
      <div>
        <a href="../ssg/"></a>
      </div>
    </div>
  )
}

export const getServerSideProps = async () => {
  const res = await fetch("https://jsonplaceholder.typicode.com/users")
  const users = await res.json()
  const usersData = users.map((user: any) => ({
    id: user.id,
    name: user.name,
    username: user.username,
    email: user.email,
  }))
  const time = new Date()
  const hour = time.getHours()
  const minute = time.getMinutes()
  const second = time.getSeconds()
  const currentTime = hour + "æ™‚" + minute + "åˆ†" + second + "ç§’"

  return {
    props: {
      usersData,
      currentTime
    }
  }
}

export default SSR
```

`getServerSideProps`ã‚’ç”¨ã„ã¦ã€ã‚µãƒ¼ãƒå´ã§å–å¾—ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã¨ç¾åœ¨æ™‚é–“ã‚’æ¸¡ã—ã¦ã„ã¾ã™ã€‚è¡¨ç¤ºå†…å®¹ã¯CSRã¨åŒã˜å†…å®¹ã§ã™ãŒã€ssg â‡„ csrã¨ssg â‡„ ssr ã®ã‚¢ã‚¯ã‚»ã‚¹é·ç§»ã®æ™‚é–“ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ssgã‹ã‚‰ssrã¸é·ç§»ã™ã‚‹ã¨ãã¯å°‘ã—æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ã€‚

[Video by Gyazo](https://gyazo.com/a156ee53541fcd2d49de42e43089a9c5)

## SSGã‚’ä½¿ç”¨ã™ã‚‹

`src/ssg/index.tsx`

```jsx
import Link from "next/link"

export const SSG = ({ usersData, currentTime }: any) => {
  return (
    <div className="w-full mx-auto py-8">
      <nav className="ml-10 flex gap-2 underline">
        <Link href="/csr">
          csr
        </Link>
        <Link href="/ssr">
          ssr
        </Link>
      </nav>
      <h2 className="text-[32px] text-center pt-[64px] pb-8">SSG</h2>
      <div className="text-[32px] text-center">{currentTime}</div>
      <table className="border max-w-[800px] w-full mx-auto">
        <thead className="border">
          <tr>
            <th className="border">id</th>
            <th className="border">name</th>
            <th className="border">username</th>
            <th className="border">email</th>
          </tr>
        </thead>
        <tbody>
          {
            usersData.map((user: any) => (
              <tr key={user.id}>
                <td className="border">{user.id}</td>
                <td className="border">{user.name}</td>
                <td className="border">{user.username}</td>
                <td className="border">{user.email}</td>
              </tr>
            ))
          }
        </tbody>
      </table>
    </div>
  )
}

export const getStaticProps = async () => {
  const res = await fetch("https://jsonplaceholder.typicode.com/users")
  const users = await res.json()
  const usersData = users.map((user: any) => ({
    id: user.id,
    name: user.name,
    username: user.username,
    email: user.email,
  }))
  const time = new Date()
  const hour = time.getHours()
  const minute = time.getMinutes()
  const second = time.getSeconds()
  const currentTime = hour + "æ™‚" + minute + "åˆ†" + second + "ç§’"

  return {
    props: {
      usersData,
      currentTime
    }
  }
}

export default SSG
```

`getStaticProps`ã‚’ç”¨ã„ã¦ã€ã‚µãƒ¼ãƒå´ã§å–å¾—ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã¨ç¾åœ¨æ™‚é–“ã‚’æ¸¡ã—ã¦ã„ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã«å¤‰ã‚ã‚Šã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€è¡¨ç¤ºæ™‚é–“ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€csrã¨ssrã¯å…±ã«ãƒªãƒ­ãƒ¼ãƒ‰ã‚’ã—ãŸéš›ã«æ™‚é–“ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã®ã«å¯¾ã—ã€ssgã¯ä½•åº¦ãƒªãƒ­ãƒ¼ãƒ‰ã‚’ã—ã¦ã‚‚æ™‚é–“ãŒå¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ“ãƒ«ãƒ‰æ™‚ã«ç”Ÿæˆã—ãŸé™çš„ãƒšãƒ¼ã‚¸ã®ã¾ã¾ãƒ‡ãƒ¼ã‚¿ãŒæ›´æ–°ã•ã‚Œã¦ã„ãªã„ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚

## æœ€å¾Œã«

ä»¥ä¸Šã€ç°¡å˜ãªã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã¦CSR, SSR, SSGã®æŒ™å‹•ã®ä¸€ä¾‹ã‚’è¦‹ã¦ãã¾ã—ãŸã€‚ã“ã“ã§ã¯ä¸€éƒ¨ã®æƒ…å ±ã—ã‹è©¦ã›ã¦ã„ã¾ã›ã‚“ã®ã§ã€è©³ã—ã„æƒ…å ±ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„ä»–ã®ã‚µã‚¤ãƒˆã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚ãã‚Œãã‚Œã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®èªè­˜ãŒé–“é•ã£ã¦ã„ã¾ã—ãŸã‚‰ã€ã”æŒ‡æ‘˜ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚

## å‚è€ƒ
https://nextjs.org/docs/pages/building-your-application/data-fetching
https://zenn.dev/a_da_chi/articles/105dac5573b2f5
https://yutaro-blog.net/2021/12/03/spa-csr-ssr-ssg-sg/
https://dev.classmethod.jp/articles/nextjs-rendering/
https://qiita.com/hiroki-yama-1118/items/b3388c5dcb155e2e367d
